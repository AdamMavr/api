# используем образ postgres в качестве базового образа контейнера. последняя версия
FROM postgres:latest

# Определение переменных окружения
# Эта переменная будет использоваться контейнером для определения имени пользователя для доступа к базе данных
ENV POSTGRES_USER postgres
# Эта переменная будет использоваться контейнером чтобы установить пароль для пользователя
ENV POSTGRES_PASSWORD postgres
# Эта переменная будет использоваться контейнером чтобы создать базу данных с именем mydb
ENV POSTGRES_DB mydb

# Копирование SQL-скрипта для инициализации базы данных в контейнере
COPY init.sql /docker-entrypoint-initdb.d/

# контейнер будет прослушивать порт 5432 (дефолтный порт для подключения к postgres)
EXPOSE 5432

# docker build -t my-postgres . : билд контейнера | -t my-postgres - задает имя (тег) образа | . - текущий каталог докерфайла

#docker run -d -p 5432:5432 --name my-postgres-container my-postgres : запуск контейнера в фоновом режиме (терминал остается доступен) | -p : указывает порт | --name my-postgres-container : имя контейнера | my-postgres : имя образа
